<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aqiqual</title>
  <style>

    /* General Style */
body {
  font-family: Arial, sans-serif;
  background-color: #f5f5f5;
  color: #333;
  margin: 0;
  padding: 0;
}

/* Header */
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #333;
  color: white;
  padding: 15px 30px;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
}

.header-left, .header-right {
  display: flex;
  align-items: center;
}

.header-left img {
  width: 50px;
  height: 50px;
  margin-right: 15px;
}

.header-right img {
  width: 50px;
  height: 50px;
  margin-left: 10px;
}

.header-left h1 {
  font-size: 24px;
  font-weight: bold;
  margin: 0;
}

/* Main Body */
main {
  padding: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Upper Division */
.up-div {
  display: flex;
  width: 100%;
  max-width: 1000px;
  gap: 20px;
  margin-bottom: 30px;
  justify-content: space-between;
}

.input-box {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 45%;
  background-color: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
}

.input-box label {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 10px;
}

.input-box input[type="text"] {
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ddd;
  border-radius: 5px;
  width: 100%;
  font-size: 14px;
}

.input-box button {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  background-color: #28a745;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.3s;
}

.input-box button:hover {
  background-color: #218838;
}

/* Progress Indicators */
.blank-div {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 45%;
  background-color: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
}

.h1 {
  display: flex;
  width: 100%;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 15px;
  font-size: 16px;
  margin-bottom: 15px;
  overflow: hidden;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.h1 p {
  margin: 0;
  padding: 10px;
  text-align: right;
  color: white;
  font-weight: bold;
  border-radius: 15px;
}

.prog1{
    margin: 0;
    animation: progressAnimation1 3s;
    text-align: right;
    background-color: red;
    color: white;
    border-radius: 15px;
    width: 20%;
}
@keyframes progressAnimation1{
    0% { width: 5%; background-color: #d2dbde; }
    100% { width: 20%; background-color: #211ecf; }
}

.prog2{
    margin: 0;
    animation: progressAnimation2 7.5s;
    text-align: right;
    background-color: orange;
    color: white;
    border-radius: 15px;
    width: 40%;
}
@keyframes progressAnimation2{
    0% { width: 5%; background-color: #F9BCCA; }
    100% { width: 40%; background-color: #4f73eb; }
}

.prog3{
    margin: 0;
    animation: progressAnimation3 4.5s;
    text-align: right;
    background-color: rgb(241, 238, 36);
    color: white;
    border-radius: 15px;
    width: 60%;
}
@keyframes progressAnimation3{
    0% { width: 5%; background-color: #effc59; }
    100% { width: 60%; background-color: #b9fc4c; }
}

.prog4{
    margin: 0;
    animation: progressAnimation4 9s;
    text-align: right;
    background-color:rgb(101, 255, 62);
    color: white;
    border-radius: 15px;
    width: 80%;
}

@keyframes progressAnimation4{
    0% { width: 5%; background-color: #F9BCCA; }
    100% { width: 80%; background-color:  #e29c40; }
}

.prog5{
    margin: 0;
    animation: progressAnimation5 9s;
    text-align: right;
    background-color:rgb(58, 207, 20);
    color: white;
    border-radius: 15px;
    width: 99%;
}
@keyframes progressAnimation5{
    0% { width: 5%; background-color: #F9BCCA; }
    100% { width: 99%; background-color:  #e29c40; }
}


/* Down Division (Table) */
.table-container {
  width: 100%;
  max-width: 1000px;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
  padding: 20px;
  overflow-x: auto;
}

.table-container table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

.table-container th, .table-container td {
  padding: 12px;
  text-align: left;
  border: 1px solid #ddd;
}

.table-container th {
  background-color: #f2f2f2;
  font-weight: 600;
}

.table-container tr:nth-child(even) {
  background-color: #f9f9f9;
}

/* Footer */
footer {
  background-color: #333;
  color: white;
  text-align: center;
  padding: 15px;
  font-size: 14px;
}

footer a {
  color: #28a745;
  text-decoration: none;
}

footer a:hover {
  color: #1e7e34;
}

  </style>
</head>
<body>


  <header>
    <div class="header-left">
      <img src="../img/icon.jpg" alt="Website Logo">
      <h1>Aqiqual</h1>
    </div>
    <div class="header-right">
      <span style="font-size: 20px;">Username</span>
      <img src="../img/icon2.jpg" alt="Username Logo">
    </div>
  </header>

  <main>

    <div class="up-div">

        <div class="input-box">
          <h1>Check Air Quality :</h1>
          <label for="city">Provide the city name:</label>
          <input type="text" id="city" placeholder="Enter city name">
          <button type="button" onclick="doing()">Submit</button>
        </div>


        <div class="blank-div">
            <h4>Value Info :</h4>
            <div class="h1">
                <P class="prog1">5</P>
            </div>
            <p>Very Poorüò†</p>
        
            <br>
            <div class="h1">
                <P class="prog2">4</P>
            </div>
            <p>PoorüôÅ</p>

            <br>
            <div class="h1">
                <P class="prog3">3</P>
            </div>
            <p>Moderateüòê</p>
        
            <br>
            <div class="h1">
                <P class="prog4">2</P>
            </div>
            <p>FairüôÇ</p>
            <br>
            
            <div class="h1">
                <P class="prog5">1</P>
            </div>
            <p>Goodüòä</p>
        </div>
    </div>

    <div class="down-div table-container">
        <h4>Data sheet:</h4>
      <table>
        <tr>
          <th>Qualitative Name</th>
          <th>Index</th>
          <th>SO<sub>2</sub> (Œºg/m<sup>3</sup>)</th>
          <th>NO<sub>2</sub> (Œºg/m<sup>3</sup>)</th>
          <th>PM<sub>10</sub> (Œºg/m<sup>3</sup>)</th>
          <th>PM<sub>2.5</sub> (Œºg/m<sup>3</sup>)</th>
          <th>O<sub>3</sub> (Œºg/m<sup>3</sup>)</th>
          <th>CO (Œºg/m<sup>3</sup>)</th>
        </tr>
        <tr>
          <td>Good</td>
          <td>1</td>
          <td>[0; 20]</td>
          <td>[0; 40]</td>
          <td>[0; 20]</td>
          <td>[0; 10]</td>
          <td>[0; 60]</td>
          <td>[0; 4400]</td>
        </tr>
        <tr>
          <td>Fair</td>
          <td>2</td>
          <td>[20; 80]</td>
          <td>[40; 70]</td>
          <td>[20; 50]</td>
          <td>[10; 25]</td>
          <td>[60; 100]</td>
          <td>[4400; 9400]</td>
        </tr>
        <tr>
          <td>Moderate</td>
          <td>3</td>
          <td>[80; 250]</td>
          <td>[70; 150]</td>
          <td>[50; 100]</td>
          <td>[25; 50]</td>
          <td>[100; 140]</td>
          <td>[9400; 12400]</td>
        </tr>
        <tr>
          <td>Poor</td>
          <td>4</td>
          <td>[250; 350]</td>
          <td>[150; 200]</td>
          <td>[100; 200]</td>
          <td>[50; 75]</td>
          <td>[140; 180]</td>
          <td>[12400; 15400]</td>
        </tr>
        <tr>
          <td>Very Poor</td>
          <td>5</td>
          <td>‚â•350</td>
          <td>‚â•200</td>
          <td>‚â•200</td>
          <td>‚â•75</td>
          <td>‚â•180</td>
          <td>‚â•15400</td>
        </tr>
      </table>
    </div>
  </main>

  <footer>
    Please click here to provide your valuable <a href="./feed.html">feedback</a>.
  </footer>
<script>
function doing(){
    var citname =document.getElementById("city").value;
    getAirQuality(citname);
    var citname = document.getElementById("city").value;
    getAirQuality(citname).then(() => {
    window.location.href = "main2.html";  // Redirect to main2.html
    });
    }


    async function getAirQuality(cityname) {
  if (!cityname) {
    alert("Please enter a city name.");
    return;
  }

  const apiKey = '463a6e40a321343a9d701160110ae3a0';
  try {
    const geoRes = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityname}&appid=${apiKey}`);
    const geoData = await geoRes.json();

    if (geoData.cod !== 200) {
      alert("City not found. Please check the spelling or try a different city.");
      return;
    }

    const { lat, lon } = geoData.coord;
    const airQualityRes = await fetch(`https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${apiKey}`);
    const airQualityData = await airQualityRes.json();
    
    localStorage.setItem('cityname', JSON.stringify(airQualityData));
    localStorage.setItem('cit', cityname);
  } catch (error) {
    console.error(error);
    alert("There was an error retrieving the data. Please try again.");
  }
}

    
</script>
</body>
</html>
